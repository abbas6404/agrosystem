<%@page import="com.mycompany.agrosystem.model.User"%>
<%@ taglib uri="jakarta.tags.core" prefix="c" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html lang="bn">
<head>
    <title>অ্যাডমিন ড্যাশবোর্ড</title>
    <link rel="stylesheet" href="${pageContext.request.contextPath}/css/style.css">
    <link rel="stylesheet" href="[https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css](https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css)">
</head>
<body>
    <% User user = (User) session.getAttribute("loggedInUser"); if (user == null || !"ADMIN".equals(user.getUserType())) { response.sendRedirect(request.getContextPath() + "/login.jsp"); return; } %>
    <div class="dashboard-container">
        <aside class="sidebar"><div class="sidebar-header"><h3><i class="fas fa-tractor"></i> এগ্রো সিস্টেম</h3></div><nav class="sidebar-nav"><a href="${pageContext.request.contextPath}/admin/dashboard" class="nav-item active"><i class="fas fa-tachometer-alt"></i> ড্যাশবোর্ড</a><a href="${pageContext.request.contextPath}/admin/crops" class="nav-item"><i class="fas fa-leaf"></i> ফসল পরিচালনা</a></nav></aside>
        <main class="main-content">
            <header class="main-header"><div class="header-title"><h2>অ্যাডমিন ড্যাশবোর্ড</h2><p>স্বাগতম, <%= user.getName() %>!</p></div><div class="header-actions"><a href="${pageContext.request.contextPath}/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> লগ আউট</a></div></header>
            <div class="dashboard-cards"><div class="card"><div class="card-icon"><i class="fas fa-users"></i></div><div class="card-info"><h4>মোট কৃষক</h4><p>${farmerCount} জন</p></div></div><div class="card"><div class="card-icon"><i class="fas fa-leaf"></i></div><div class="card-info"><h4>মোট ফসল</h4><p>${cropCount} টি</p></div></div><div class="card"><div class="card-icon"><i class="fas fa-server"></i></div><div class="card-info"><h4>সিস্টেম স্ট্যাটাস</h4><p style="color: #27ae60;">অনলাইন</p></div></div></div>
            <div class="content-area" style="margin-bottom: 30px;"><h3><i class="fas fa-bullhorn"></i> নোটিশ বোর্ড</h3><form action="${pageContext.request.contextPath}/admin/notices" method="post"><div class="input-group"><label>শিরোনাম</label><input type="text" name="title" required></div><div class="input-group"><label>বিস্তারিত</label><textarea name="content" rows="3" required></textarea></div><button type="submit">নোটিশ প্রকাশ করুন</button></form></div>
            <div class="content-area"><h3><i class="fas fa-users"></i> নিবন্ধিত সকল কৃষক</h3><div class="table-container"><table class="styled-table"><thead><tr><th>নাম</th><th>ফোন</th><th>এলাকা</th><th>পদক্ষেপ</th></tr></thead><tbody><c:forEach var="farmer" items="${allFarmers}"><tr><td>${farmer.getName()}</td><td>${farmer.getPhoneNumber()}</td><td>${farmer.getLocation()}</td><td><a href="${pageContext.request.contextPath}/admin/editFarmer?id=${farmer.getId()}" class="action-btn btn-edit">সম্পাদনা</a><a href="${pageContext.request.contextPath}/admin/deleteFarmer?id=${farmer.getId()}" class="action-btn btn-delete" onclick="return confirm('নিশ্চিত?')">মুছুন</a></td></tr></c:forEach></tbody></table></div></div>
        </main>
    </div>
</body>
</html>